diff -r 6bb657898f55 Xcode/SDL/Info-Framework.plist
--- a/Xcode/SDL/Info-Framework.plist	Tue Feb 28 21:58:36 2012 -0500
+++ b/Xcode/SDL/Info-Framework.plist	Wed Jul 04 22:19:47 2012 +0200
@@ -19,10 +19,10 @@
 	<key>CFBundlePackageType</key>
 	<string>FMWK</string>
 	<key>CFBundleShortVersionString</key>
-	<string>1.3.0</string>
+	<string>2.0.0</string>
 	<key>CFBundleSignature</key>
 	<string>SDLX</string>
 	<key>CFBundleVersion</key>
-	<string>1.3.0</string>
+	<string>2.0.0</string>
 </dict>
 </plist>
diff -r 6bb657898f55 Xcode/SDL/SDL.xcodeproj/project.pbxproj
--- a/Xcode/SDL/SDL.xcodeproj/project.pbxproj	Tue Feb 28 21:58:36 2012 -0500
+++ b/Xcode/SDL/SDL.xcodeproj/project.pbxproj	Wed Jul 04 22:19:47 2012 +0200
@@ -2316,7 +2316,7 @@
 		00CFA621106A567900758660 /* Release */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ARCHS = "$(ARCHS_STANDARD_32_64_BIT)";
+				ARCHS = "$(ARCHS_STANDARD_64_BIT)";
 				DEPLOYMENT_POSTPROCESSING = YES;
 				GCC_ALTIVEC_EXTENSIONS = YES;
 				GCC_AUTO_VECTORIZATION = YES;
@@ -2324,8 +2324,8 @@
 				GCC_GENERATE_DEBUGGING_SYMBOLS = NO;
 				GCC_OPTIMIZATION_LEVEL = 3;
 				GCC_SYMBOLS_PRIVATE_EXTERN = YES;
-				MACOSX_DEPLOYMENT_TARGET = 10.5;
-				SDKROOT = macosx;
+				MACOSX_DEPLOYMENT_TARGET = 10.7;
+				SDKROOT = macosx10.7;
 				STRIP_STYLE = "non-global";
 			};
 			name = Release;
@@ -2380,14 +2380,14 @@
 		00CFA627106A568900758660 /* Debug */ = {
 			isa = XCBuildConfiguration;
 			buildSettings = {
-				ARCHS = "$(ARCHS_STANDARD_32_64_BIT)";
+				ARCHS = "$(ARCHS_STANDARD_64_BIT)";
 				GCC_ALTIVEC_EXTENSIONS = YES;
 				GCC_AUTO_VECTORIZATION = YES;
 				GCC_ENABLE_SSE3_EXTENSIONS = YES;
 				GCC_OPTIMIZATION_LEVEL = 0;
 				GCC_SYMBOLS_PRIVATE_EXTERN = YES;
-				MACOSX_DEPLOYMENT_TARGET = 10.5;
-				SDKROOT = macosx;
+				MACOSX_DEPLOYMENT_TARGET = 10.7;
+				SDKROOT = macosx10.7;
 				STRIP_INSTALLED_PRODUCT = NO;
 			};
 			name = Debug;
diff -r 6bb657898f55 src/events/scancodes_darwin.h
--- a/src/events/scancodes_darwin.h	Tue Feb 28 21:58:36 2012 -0500
+++ b/src/events/scancodes_darwin.h	Wed Jul 04 22:19:47 2012 +0200
@@ -91,7 +91,7 @@
     /*  61 */   SDL_SCANCODE_RALT,
     /*  62 */   SDL_SCANCODE_RCTRL,
     /*  63 */   SDL_SCANCODE_RGUI, /* fn on portables, acts as a hardware-level modifier already, so we don't generate events for it, also XK_Meta_R */
-    /*  64 */   SDL_SCANCODE_UNKNOWN, /* unknown (unused?) */
+    /*  64 */   SDL_SCANCODE_F17, /* unknown (unused?) */
     /*  65 */   SDL_SCANCODE_KP_PERIOD,
     /*  66 */   SDL_SCANCODE_UNKNOWN, /* unknown (unused?) */
     /*  67 */   SDL_SCANCODE_KP_MULTIPLY,
@@ -106,8 +106,8 @@
     /*  76 */   SDL_SCANCODE_KP_ENTER, /* keypad enter on external keyboards, fn-return on portables */
     /*  77 */   SDL_SCANCODE_UNKNOWN, /* unknown (unused?) */
     /*  78 */   SDL_SCANCODE_KP_MINUS,
-    /*  79 */   SDL_SCANCODE_UNKNOWN, /* unknown (unused?) */
-    /*  80 */   SDL_SCANCODE_UNKNOWN, /* unknown (unused?) */
+    /*  79 */   SDL_SCANCODE_F18, /* unknown (unused?) */
+    /*  80 */   SDL_SCANCODE_F19, /* unknown (unused?) */
     /*  81 */   SDL_SCANCODE_KP_EQUALS,
     /*  82 */   SDL_SCANCODE_KP_0,
     /*  83 */   SDL_SCANCODE_KP_1,
diff -r 6bb657898f55 src/video/cocoa/SDL_cocoaopengl.m
--- a/src/video/cocoa/SDL_cocoaopengl.m	Tue Feb 28 21:58:36 2012 -0500
+++ b/src/video/cocoa/SDL_cocoaopengl.m	Wed Jul 04 22:19:47 2012 +0200
@@ -91,6 +91,16 @@
 
     attr[i++] = NSOpenGLPFADepthSize;
     attr[i++] = _this->gl_config.depth_size;
+	
+	if ((_this->gl_config.major_version == 3 && _this->gl_config.minor_version >= 2) ||
+		_this->gl_config.major_version > 3) {
+		attr[i++] = NSOpenGLPFAOpenGLProfile;
+		attr[i++] = NSOpenGLProfileVersion3_2Core;
+	}
+	else {
+		attr[i++] = NSOpenGLPFAOpenGLProfile;
+		attr[i++] = NSOpenGLProfileVersionLegacy;
+	}
 
     if (_this->gl_config.double_buffer) {
         attr[i++] = NSOpenGLPFADoubleBuffer;
diff -r 6bb657898f55 src/video/cocoa/SDL_cocoawindow.m
--- a/src/video/cocoa/SDL_cocoawindow.m	Tue Feb 28 21:58:36 2012 -0500
+++ b/src/video/cocoa/SDL_cocoawindow.m	Wed Jul 04 22:19:47 2012 +0200
@@ -154,7 +154,7 @@
 {
     SDL_VideoDevice *device = SDL_GetVideoDevice();
     int x, y, w, h;
-    NSRect rect = [_data->nswindow contentRectForFrameRect:[_data->nswindow frame]];
+    NSRect rect = [_data->nswindow convertRectToBacking:[_data->nswindow contentRectForFrameRect:[_data->nswindow frame]]];
     ConvertNSRect(&rect);
     x = (int)rect.origin.x;
     y = (int)rect.origin.y;
@@ -534,9 +534,21 @@
         /* Create view if not already exists */
         if (!contentView) {
             contentView = [[SDLView alloc] initWithFrame:rect];
+            [contentView setWantsBestResolutionOpenGLSurface:YES];
             [nswindow setContentView: contentView];
+            NSPoint offset = rect.origin;
+            rect = [contentView convertRectToBacking:[contentView bounds]];
+            offset = [contentView convertPointToBacking:offset];
+            rect.origin = offset;
             [contentView release];
         }
+        else {
+            [contentView setWantsBestResolutionOpenGLSurface:YES];
+            NSPoint offset = rect.origin;
+            rect = [contentView convertRectToBacking:[contentView bounds]];
+            offset = [contentView convertPointToBacking:offset];
+            rect.origin = offset;
+        }
 
         ConvertNSRect(&rect);
         window->x = (int)rect.origin.x;
